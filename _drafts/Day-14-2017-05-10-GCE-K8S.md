---
layout: post
title:  "First-time at Smith Tower"
date:   2017-04-29 19:35:00 -0700
categories: GEP
---
## GCE


Adrian Cockcroft former cloud architect who made micro services mainstream


conway's law

the structure of an organization guides the kind of structure of the code they produce

so what I'm really saying is that you can't build micro services with a waterfall organization.


```
gcloud compute zones list

gcloud config set compute/zone <zone>

gcloud compute instances create ubuntu \
--image-project ubuntu-os-cloud \
--image ubuntu-1604-xenial-v20160420c

gcloud compute ssh ubuntu

```

###K8s basic command

```
kubectl run nginx --image=nginx:1.10.0 # run a container as pods

kubectl get pods #check which pods are running

kubectl expose deployment nginx --port 80 --type LoadBalancer

###Creating pods

```
creating a pods
```
kubectl create -f pods/monolith.yaml
kubectl get pods

```

monolith.yaml
```
apiVersion: v1
kind: Pod
metadata:
  name: monolith
  labels:
    app: monolith
spec:
  containers:
    - name: monolith
      image: udacity/example-monolith:1.0.0
      args:
        - "-http=0.0.0.0:80"
        - "-health=0.0.0.0:81"
        - "-secret=secret"
      ports:
        - name: http
          containerPort: 80
        - name: health
          containerPort: 81
      resources:
        limits:
          cpu: 0.2
          memory: "10Mi"

```
### Interacting with pods

set up port forwarding

```
kubectl port-forward monolith 10080:80
```
